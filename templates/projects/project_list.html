{% extends 'base.html' %}

{% block title %}Loyihalar Portfoliyosi | Muhammadziyo{% endblock %}

{% block meta_description %}Python, Django, Aiogram texnologiyalari asosida yaratilgan professional loyihalar. Real veb-ilovalar va Telegram botlar.{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section py-5 bg-light">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <div class="mb-4">
                    <span class="badge bg-primary rounded-pill px-4 py-2 mb-3">
                        <i class="fas fa-rocket me-2"></i> {{ projects.count }} ta loyiha
                    </span>
                    <h1 class="display-4 fw-bold mb-3">
                        <span class="text-gradient">Yaratgan Loyihalarim</span>
                    </h1>
                    <p class="lead text-muted mb-4">
                        Professional tajribam davomida yaratilgan eng yaxshi Django, Python va Aiogram loyihalari.
                        Har bir loyiha haqiqiy muammolarga innovatsion yechimdir.
                    </p>
                    
                    <!-- Stats -->
                    <div class="row g-4 mt-4">
                        <div class="col-4">
                            <div class="text-center">
                                <div class="display-5 fw-bold text-primary mb-1">1+</div>
                                <div class="text-muted small">Yil tajriba</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-center">
                                <div class="display-5 fw-bold text-success mb-1">{{ projects.count }}</div>
                                <div class="text-muted small">Muvaffaqiyatli loyiha</div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="text-center">
                                <div class="display-5 fw-bold text-warning mb-1">10+</div>
                                <div class="text-muted small">Texnologiya</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6">
                <div class="position-relative">
                    <div class="code-snippet position-relative p-4 bg-dark text-white rounded-4 shadow-lg">
                        <div class="d-flex align-items-center mb-3">
                            <div class="circle bg-danger me-2"></div>
                            <div class="circle bg-warning me-2"></div>
                            <div class="circle bg-success"></div>
                            <div class="ms-auto text-muted">projects.py</div>
                        </div>
                        <pre class="mb-0" style="font-family: 'Courier New', monospace;">
<span class="text-primary">class</span> <span class="text-success">ProjectPortfolio</span>:
    <span class="text-primary">def</span> <span class="text-warning">__init__</span>(self):
        self.technologies = [
            <span class="text-info">"Python"</span>, <span class="text-info">"Django"</span>,
            <span class="text-info">"Django REST"</span>, <span class="text-info">"Aiogram"</span>,
            <span class="text-info">"PostgreSQL"</span>, <span class="text-info">"Docker"</span>
        ]
        self.projects_count = {{ projects.count }}
        <span class="text-muted"># Professional loyihalar portfoliyosi</span></pre>
                    </div>
                    
                    <!-- Floating elements -->
                    <div class="floating-element position-absolute" style="top: -20px; right: -20px;">
                        <div class="bg-primary text-white p-3 rounded-circle shadow">
                            <i class="fas fa-code fa-2x"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Filter Section -->
<section class="filter-section py-4 bg-white border-top border-bottom">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-4 mb-3 mb-lg-0">
                <h5 class="mb-0">
                    <i class="fas fa-filter text-primary me-2"></i>
                    Texnologiya bo'yicha filtrlash:
                </h5>
            </div>
            
            <div class="col-lg-8">
                <div class="d-flex flex-wrap gap-2">
                    <button class="btn btn-outline-primary btn-sm active" data-filter="all">
                        <i class="fas fa-layer-group me-1"></i> Barchasi
                    </button>
                    <button class="btn btn-outline-primary btn-sm" data-filter="django">
                        <i class="fab fa-python me-1"></i> Django
                    </button>
                    <button class="btn btn-outline-primary btn-sm" data-filter="python">
                        <i class="fab fa-python me-1"></i> Python
                    </button>
                    <button class="btn btn-outline-primary btn-sm" data-filter="api">
                        <i class="fas fa-plug me-1"></i> API
                    </button>
                    <button class="btn btn-outline-primary btn-sm" data-filter="bot">
                        <i class="fas fa-robot me-1"></i> Telegram Bot
                    </button>
                    <button class="btn btn-outline-primary btn-sm" data-filter="web">
                        <i class="fas fa-globe me-1"></i> Veb-ilova
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Projects Grid -->
<section class="projects-section py-5">
    <div class="container">
        {% if projects %}
        <div class="row g-4" id="projectsGrid">
            {% for project in projects %}
            <div class="col-lg-4 col-md-6 project-item" 
                 data-category="{% for tech in project.technologies.split %}{{ tech|lower }} {% endfor %}">
                <div class="card border-0 shadow-lg h-100 hover-lift">
                    <!-- Project Image -->
                    <div class="position-relative overflow-hidden rounded-top" style="height: 200px;">
                        {% if project.image %}
                        <img src="{{ project.image.url }}" 
                             class="card-img-top project-image" 
                             alt="{{ project.title }}"
                             style="height: 100%; object-fit: cover;">
                        {% else %}
                        <div class="bg-gradient-primary h-100 d-flex align-items-center justify-content-center">
                            <i class="fas fa-code text-white fa-4x"></i>
                        </div>
                        {% endif %}
                        
                        <!-- Overlay Badges -->
                        <div class="position-absolute top-0 start-0 m-3">
                            {% if project.is_featured %}
                            <span class="badge bg-warning text-dark">
                                <i class="fas fa-star me-1"></i> Tanlangan
                            </span>
                            {% endif %}
                        </div>
                        
                        <!-- Hover Overlay -->
                        <div class="project-overlay position-absolute top-0 start-0 w-100 h-100 bg-dark bg-opacity-75 d-flex align-items-center justify-content-center opacity-0">
                            <a href="{% url 'projects:project_detail' project.id %}" 
                               class="btn btn-light btn-lg rounded-pill px-4">
                                <i class="fas fa-eye me-2"></i> Ko'rish
                            </a>
                        </div>
                    </div>
                    
                    <!-- Card Body -->
                    <div class="card-body p-4">
                        <!-- Category -->
                        {% if project.category %}
                        <div class="mb-3">
                            <span class="badge bg-primary bg-opacity-10 text-primary rounded-pill px-3 py-1">
                                <i class="fas fa-tag me-1"></i> {{ project.category }}
                            </span>
                        </div>
                        {% endif %}
                        
                        <!-- Title -->
                        <h5 class="card-title mb-3 fw-bold">
                            <a href="{% url 'projects:project_detail' project.id %}" 
                               class="text-decoration-none text-dark">
                                {{ project.title }}
                            </a>
                        </h5>
                        
                        <!-- Description -->
                        <p class="card-text text-muted mb-4">
                            {{ project.description|truncatechars:120 }}
                        </p>
                        
                        <!-- Technologies -->
                        <div class="mb-4">
                            <h6 class="small text-muted mb-2">
                                <i class="fas fa-tools me-1"></i> Ish qilingan texnologiyalar:
                            </h6>
                            <div class="d-flex flex-wrap gap-1">
                                {% for tech in project.technologies.split|slice:":4" %}
                                <span class="badge bg-light text-dark border py-1 px-2">
                                    <i class="fas fa-code me-1"></i> {{ tech }}
                                </span>
                                {% endfor %}
                                {% if project.technologies.split|length > 4 %}
                                <span class="badge bg-light text-dark border py-1 px-2">
                                    +{{ project.technologies.split|length|add:"-4" }}
                                </span>
                                {% endif %}
                            </div>
                        </div>
                        
                        <!-- Meta Info -->
                        <div class="d-flex justify-content-between align-items-center border-top pt-3">
                            <div class="d-flex align-items-center">
                                <i class="far fa-calendar text-muted me-2"></i>
                                <small class="text-muted">{{ project.created_at|date:"d.m.Y" }}</small>
                            </div>
                            <div class="d-flex gap-2">
                                {% if project.project_url %}
                                <a href="{{ project.project_url }}" 
                                   target="_blank"
                                   class="btn btn-sm btn-outline-primary"
                                   title="Demo sahifa">
                                    <i class="fas fa-external-link-alt"></i>
                                </a>
                                {% endif %}
                                {% if project.github_url %}
                                <a href="{{ project.github_url }}" 
                                   target="_blank"
                                   class="btn btn-sm btn-dark"
                                   title="GitHub kodlari">
                                    <i class="fab fa-github"></i>
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <!-- Empty State for Filter -->
        <div id="noProjectsMessage" class="text-center py-5 d-none">
            <div class="py-5">
                <i class="fas fa-search fa-4x text-muted mb-4"></i>
                <h4 class="mb-3">Loyihalar topilmadi</h4>
                <p class="text-muted mb-4">Tanlangan filtrga mos keladigan loyihalar mavjud emas.</p>
                <button class="btn btn-primary" id="resetFilters">
                    <i class="fas fa-redo me-2"></i> Filtrlarni tozalash
                </button>
            </div>
        </div>
        
        {% else %}
        <!-- Empty Portfolio State -->
        <div class="text-center py-5">
            <div class="empty-state py-5">
                <i class="fas fa-folder-open fa-4x text-muted mb-4"></i>
                <h4 class="mb-3">Hali loyihalar qo'shilmagan</h4>
                <p class="text-muted mb-4">Tez orada yangi loyihalar bilan to'ldiraman</p>
                <div class="d-flex justify-content-center gap-3">
                    <a href="/" class="btn btn-outline-primary">
                        <i class="fas fa-home me-2"></i> Bosh sahifa
                    </a>
                    <a href="{% url 'contact' %}" class="btn btn-primary">
                        <i class="fas fa-paper-plane me-2"></i> Loyiha taklif qilish
                    </a>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<!-- Call to Action -->
{% if projects %}
<section class="cta-section py-5 bg-primary bg-gradient text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8">
                <h2 class="mb-3">Loyihangizni topshirmoqchimisiz?</h2>
                <p class="mb-0">Mening tajribam va ko'nikmalarimdan foydalanishni istasangiz, bog'laning.</p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <a href="{% url 'contact' %}" class="btn btn-light btn-lg px-4">
                    <i class="fas fa-paper-plane me-2"></i> Murojaat qilish
                </a>
            </div>
        </div>
    </div>
</section>
{% endif %}

<style>
    .text-gradient {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .bg-gradient-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .code-snippet {
        border-left: 4px solid #667eea;
    }
    
    .circle {
        width: 12px;
        height: 12px;
        border-radius: 50%;
    }
    
    .project-item {
        transition: transform 0.3s ease;
    }
    
    .hover-lift {
        transition: all 0.3s ease;
    }
    
    .hover-lift:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.1) !important;
    }
    
    .project-image {
        transition: transform 0.5s ease;
    }
    
    .hover-lift:hover .project-image {
        transform: scale(1.1);
    }
    
    .project-overlay {
        transition: opacity 0.3s ease;
    }
    
    .hover-lift:hover .project-overlay {
        opacity: 1;
    }
    
    .floating-element {
        animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }
    
    .empty-state {
        max-width: 500px;
        margin: 0 auto;
    }
    
    .btn-outline-primary.active {
        background-color: #667eea;
        color: white;
        border-color: #667eea;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Filter functionality
        const filterButtons = document.querySelectorAll('[data-filter]');
        const projectItems = document.querySelectorAll('.project-item');
        const noProjectsMessage = document.getElementById('noProjectsMessage');
        const resetFiltersBtn = document.getElementById('resetFilters');
        
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Update active button
                filterButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                
                const filter = this.dataset.filter;
                let visibleCount = 0;
                
                // Filter projects
                projectItems.forEach(item => {
                    if (filter === 'all' || item.dataset.category.includes(filter)) {
                        item.style.display = 'block';
                        visibleCount++;
                    } else {
                        item.style.display = 'none';
                    }
                });
                
                // Show/hide no projects message
                if (visibleCount === 0) {
                    noProjectsMessage.classList.remove('d-none');
                } else {
                    noProjectsMessage.classList.add('d-none');
                }
            });
        });
        
        // Reset filters
        if (resetFiltersBtn) {
            resetFiltersBtn.addEventListener('click', function() {
                filterButtons.forEach(btn => {
                    if (btn.dataset.filter === 'all') {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
                
                projectItems.forEach(item => {
                    item.style.display = 'block';
                });
                
                noProjectsMessage.classList.add('d-none');
            });
        }
        
        // Add animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                }
            });
        }, observerOptions);
        
        projectItems.forEach(item => observer.observe(item));
        
        // Add CSS for animations
        const style = document.createElement('style');
        style.textContent = `
            .project-item {
                opacity: 0;
                transform: translateY(20px);
                transition: opacity 0.5s ease, transform 0.5s ease;
            }
            
            .project-item.animate-in {
                opacity: 1;
                transform: translateY(0);
            }
            
            .project-item:nth-child(1) { transition-delay: 0.1s; }
            .project-item:nth-child(2) { transition-delay: 0.2s; }
            .project-item:nth-child(3) { transition-delay: 0.3s; }
            .project-item:nth-child(4) { transition-delay: 0.4s; }
            .project-item:nth-child(5) { transition-delay: 0.5s; }
            .project-item:nth-child(6) { transition-delay: 0.6s; }
        `;
        document.head.appendChild(style);
        
        // Initialize tooltips
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[title]'));
        tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    });
</script>
{% endblock %}